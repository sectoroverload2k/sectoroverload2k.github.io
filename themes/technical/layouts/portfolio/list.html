{{ define "main" }}
<!-- Hero Section -->
<section class="hero" style="padding: 4rem 0 3rem;">
  <div class="container">
    <h1>Portfolio</h1>
    <p class="subtitle">Technical projects and case studies</p>
    <p class="description">
      Explore my work across SaaS platforms, infrastructure automation, and cloud architecture.
      Each project includes detailed technical breakdowns, architecture decisions, and lessons learned.
    </p>
  </div>
</section>

<section class="section">
  <div class="container">
    {{- $featured := where .Pages "Params.featured" true }}
    {{- $regular := where .Pages "Params.featured" "!=" true }}

    {{- if $featured }}
    <h2 style="margin-bottom: 2rem;">Featured Projects</h2>
    <div class="grid grid-2" style="margin-bottom: 4rem;">
      {{- range $featured }}
      <article class="section-card">
        {{- with .Params.icon }}
        <div class="section-icon">{{ . }}</div>
        {{- end }}
        <h3><a href="{{ .Permalink }}" style="color: inherit; text-decoration: none;">{{ .Title }}</a></h3>
        {{- with .Params.subtitle }}
        <p>{{ . }}</p>
        {{- end }}
        <div class="project-meta" style="margin-top: 1rem; margin-bottom: 1.5rem;">
          {{- with .Params.role }}
          <div class="meta-item">
            <span class="meta-label">Role</span>
            <span class="meta-value" style="color: var(--color-text-primary);">{{ . }}</span>
          </div>
          {{- end }}
          {{- with .Params.status }}
          <div class="meta-item">
            <span class="meta-label">Status</span>
            <span class="meta-value" style="color: var(--color-text-primary);">{{ . }}</span>
          </div>
          {{- end }}
        </div>
        <a href="{{ .Permalink }}" class="btn">View Case Study</a>
      </article>
      {{- end }}
    </div>
    {{- end }}

    {{- if $regular }}
    <h2 style="margin-bottom: 2rem;">All Projects</h2>
    <div class="grid grid-auto">
      {{- range $regular }}
      <article class="card">
        {{- with .Params.icon }}
        <div style="font-size: 2rem; margin-bottom: 1rem;">{{ . }}</div>
        {{- end }}
        <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
        {{- with .Params.subtitle }}
        <p>{{ . }}</p>
        {{- else }}
        <p>{{ .Summary | truncate 120 }}</p>
        {{- end }}
        <div style="margin-top: 1rem; font-size: 0.875rem; color: var(--color-text-muted);">
          {{- with .Params.timeline }}{{ . }}{{ end }}
          {{- with .Params.status }} &middot; {{ . }}{{ end }}
        </div>
      </article>
      {{- end }}
    </div>
    {{- end }}
  </div>
</section>
{{ end }}
